---
import CodilityListLayout from "../layouts/CodilityListLayout.astro";
import { getCollection } from "astro:content";
// import CodilityPosts from "../components/client/CodilityPosts";
// import type { MarkdownInstance } from "astro";

const allPosts = await getCollection("codility");

// const sections = allPosts.reduce<Record<string, Array<MarkdownInstance<Frontmatter>>>>(
//   (acc, post) => {
//     const section = post.frontmatter.section;
//     if (!(section in acc)) {
//       acc[section] = [];
//     }
//     acc[section].push(post);
//     return acc;
//   },
//   {}
// );

const uniqueTags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
---

<CodilityListLayout tags={uniqueTags} posts={allPosts} />
